- id: get_shopping_list_unchecked_telegram
  alias: Retrieve all shopping list items
  trigger:
    platform: event
    event_type: telegram_command
    event_data:
      command: '/shop'
  action:
    - service: telegram_bot.send_message
      data_template:
        target: "{{ trigger.event.data.chat_id }}"
        message: >
          {% set items = states('sensor.shopping_list_unchecked_items') %}
          {% if items == "" %}
            The shopping list is empty ðŸ˜”
          {% else %}
            Here's the items in your shopping list:
          {{ items }}
          {% endif %}

- id: clear_shopping_list_command
  trigger:
    platform: event
    event_type: telegram_command
    event_data:
      command: '/clear_shop'
  action:
    - service: shopping_list.complete_all
    - service: telegram_bot.send_message
      data:
        target: "{{ trigger.event.data.chat_id }}"
        message: The shopping list has been cleared
