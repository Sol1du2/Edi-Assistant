title: EDI-Habitat
views:
  - path: default_view
    type: sidebar
    title: "Home"
    icon: mdi:home
    cards:
      - type: glance
        title: Human Presence
        entities:
          - person.joao
          - person.jelena
          - person.guest1
          - person.guest2
        view_layout:
          position: sidebar

      - type: picture-elements
        image: http://192.168.1.20:8123/local/floor-plan.svg
        elements:
          # Living Room
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.living_room_ceiling_light_1
            style:
              top: 62%
              left: 33%
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.living_room_ceiling_light_2
            style:
              top: 62%
              left: 21%
          - type: state-icon
            icon: mdi:lamp
            tap_action:
              action: toggle
            entity: light.fado_lamp
            style:
              top: 50%
              left: 27%
          - type: state-icon
            icon: mdi:floor-lamp
            tap_action:
              action: toggle
            entity: light.corner_lamp
            style:
              top: 50%
              left: 14%
          - type: state-icon
            entity: sensor.living_room_temperature
            style:
              top: 33%
              left: 14%
          - type: state-label
            entity: sensor.living_room_temperature
            style:
              top: 33%
              left: 20%
          - type: state-icon
            entity: sensor.living_room_humidity
            style:
              top: 39%
              left: 14%
          - type: state-label
            entity: sensor.living_room_humidity
            style:
              top: 39%
              left: 20%
          
          # Kitchen
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.kitchen_ceiling_light
            style:
              top: 66%
              left: 44%
          - type: state-icon
            icon: mdi:stove
            tap_action:
              action: toggle
            entity: switch.kitchen_stove_light
            style:
              top: 75.5%
              left: 44.4%

          # Balcony
          - type: state-icon
            icon: mdi:outdoor-lamp
            tap_action:
              action: toggle
            entity: light.balcony_ceiling_light
            style:
              top: 83%
              left: 35%
          - type: state-icon
            icon: mdi:string-lights
            tap_action:
              action: toggle
            entity: switch.balcony_string_lights
            style:
              top: 83.5%
              left: 43%
          - type: state-icon
            entity: sensor.balcony_temperature
            style:
              top: 91%
              left: 20%
          - type: state-label
            entity: sensor.balcony_temperature
            style:
              top: 91%
              left: 26%
          - type: state-icon
            entity: sensor.balcony_humidity
            style:
              top: 97%
              left: 20%
          - type: state-label
            entity: sensor.balcony_humidity
            style:
              top: 97%
              left: 26%
          
          # Hallway
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.hall_ceiling_light
            style:
              top: 43%
              left: 52%

          # Boiler Room
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.boiler_room_ceiling_light
            style:
              top: 27%
              left: 62%

          # Closet
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.closet_ceiling_light
            style:
              top: 37%
              left: 62%

          # Toilet
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.toilet_ceiling_light
            style:
              top: 60%
              left: 56.4%

          # Bathroom
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.bathroom_ceiling_light
            style:
              top: 65%
              left: 65.6%
          - type: state-icon
            entity: sensor.bathroom_temperature
            style:
              top: 87%
              left: 60%
          - type: state-label
            entity: sensor.bathroom_temperature
            style:
              top: 87%
              left: 66%
          - type: state-icon
            entity: sensor.bathroom_humidity
            style:
              top: 93%
              left: 60%
          - type: state-label
            entity: sensor.bathroom_humidity
            style:
              top: 93%
              left: 66%

          # Office
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.office_ceiling_light
            style:
              top: 30%
              left: 77%
          - type: state-icon
            icon: mdi:floor-lamp
            tap_action:
              action: toggle
            entity: light.office_lamp
            style:
              top: 36%
              left: 84%
          - type: state-icon
            icon: mdi:desk-lamp
            tap_action:
              action: toggle
            entity: light.office_droopy_lamp
            style:
              top: 25%
              left: 74%
          - type: state-icon
            icon: mdi:desk-lamp
            tap_action:
              action: toggle
            entity: light.office_work_desk_lamp
            style:
              top: 36%
              left: 74%
          - type: state-icon
            entity: sensor.office_temperature
            style:
              top: 7%
              left: 70%
          - type: state-label
            entity: sensor.office_temperature
            style:
              top: 7%
              left: 76%
          - type: state-icon
            entity: sensor.office_humidity
            style:
              top: 13%
              left: 70%
          - type: state-label
            entity: sensor.office_humidity
            style:
              top: 13%
              left: 76%

          # Bedroom
          - type: state-icon
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            entity: light.bedroom_ceiling_light
            style:
              top: 59%
              left: 79%
          - type: state-icon
            icon: mdi:floor-lamp
            tap_action:
              action: toggle
            entity: light.bedroom_lamp
            style:
              top: 45%
              left: 84%
          - type: state-icon
            icon: mdi:lamp
            tap_action:
              action: toggle
            entity: switch.bedroom_nightstand_light
            style:
              top: 74%
              left: 77%
          - type: state-icon
            entity: sensor.bedroom_temperature
            style:
              top: 87%
              left: 85%
          - type: state-label
            entity: sensor.bedroom_temperature
            style:
              top: 87%
              left: 91%
          - type: state-icon
            entity: sensor.bedroom_humidity
            style:
              top: 93%
              left: 85%
          - type: state-label
            entity: sensor.bedroom_humidity
            style:
              top: 93%
              left: 91%

      - type: weather-forecast
        entity: weather.home
        show_forecast: true
        view_layout:
          position: sidebar

      - type: shopping-list
        title: Shopping List
        view_layout:
          position: sidebar
  - path: lights
    title: House Lights
    icon: mdi:lightbulb-on-outline
    cards:
      - type: grid
        title: "Living Room"
        cards:
          - type: light
            entity: light.living_room_ceiling_light_1
            name: "Ceiling Light 1"
            icon: mdi:ceiling-light
          - type: light
            entity: light.living_room_ceiling_light_2
            name: "Ceiling Light 2"
            icon: mdi:ceiling-light
          - type: light
            entity: light.fado_lamp
            name: "Fado Lamp"
            icon: mdi:lamp
          - type: light
            entity: light.corner_lamp
            name: "Corner Lamp"
            icon: mdi:floor-lamp
      - type: grid
        title: "Kitchen"
        cards:
          - type: light
            entity: light.kitchen_ceiling_light
            name: "Ceiling Light"
            icon: mdi:ceiling-light
          - type: button
            name: "Stove Light"
            entity: switch.kitchen_stove_light
            icon: mdi:stove
      - type: grid
        title: "Balcony"
        cards:
          - type: light
            entity: light.balcony_ceiling_light
            name: "Ceiling Light"
            icon: mdi:outdoor-lamp
          - type: button
            entity: switch.balcony_string_lights
            name: "String Lights"
            icon: mdi:string-lights
      - type: grid
        title: "Hallway"
        cards:
          - type: light
            entity: light.hall_ceiling_light
            name: "Ceiling Light"
            icon: mdi:ceiling-light
      - type: grid
        title: "Boiler Room"
        cards:
          - type: light
            entity: light.boiler_room_ceiling_light
            name: "Boiler Room Light"
            icon: mdi:ceiling-light
      - type: grid
        title: "Closet"
        cards:
          - type: light
            entity: light.closet_ceiling_light
            name: "Closet Light"
            icon: mdi:ceiling-light
      - type: grid
        title: "Toilet"
        cards:
          - type: light
            entity: light.toilet_ceiling_light
            name: "Toilet Light"
            icon: mdi:ceiling-light
      - type: grid
        title: "Bathroom"
        cards:
          - type: light
            entity: light.bathroom_ceiling_light
            name: "Bathroom Light"
            icon: mdi:ceiling-light
      - type: grid
        title: "Office"
        cards:
          - type: light
            entity: light.office_ceiling_light
            name: "Ceiling Light"
            icon: mdi:ceiling-light
          - type: light
            entity: light.office_lamp
            name: "Lamp"
            icon: mdi:floor-lamp
          - type: light
            entity: light.office_droopy_lamp
            name: "Droopy Lamp"
            icon: mdi:desk-lamp
          - type: light
            entity: light.office_work_desk_lamp
            name: "Work Desk Lamp"
            icon: mdi:desk-lamp
      - type: grid
        title: "Bedroom"
        cards:
          - type: light
            entity: light.bedroom_ceiling_light
            name: "Ceiling Light"
            icon: mdi:ceiling-light
          - type: light
            entity: light.bedroom_lamp
            name: "Lamp"
            icon: mdi:floor-lamp
          - type: button
            entity: switch.bedroom_nightstand_light
            name: "Nightstand Lamp"
            icon: mdi:lamp
          - type: button
            name: "Sleep Mode"
            icon: mdi:bed-king-outline
            tap_action:
              action: call-service
              service: script.turn_on
              service_data:
                entity_id: script.sleep_mode
  - path: hvac
    title: HVAC
    icon: mdi:home-thermometer-outline
    cards:
      - type: vertical-stack
        title: "Controllers"
        cards:
          - type: thermostat
            entity: climate.warmy
          - type: button
            name: "Humidifier"
            entity: switch.humidifier
            icon: mdi:air-humidifier
      - type: vertical-stack
        title: "Sensors"
        cards:
          - type: grid
            title: "Living Room"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.living_room_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.living_room_humidity
                name: "Humidity"
                graph: line
          - type: grid
            title: "Bedroom"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.bedroom_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.bedroom_humidity
                name: "Humidity"
                graph: line
          - type: grid
            title: "Bathroom"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.bathroom_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.bathroom_humidity
                name: "Humidity"
                graph: line
          - type: grid
            title: "Office"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.office_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.office_humidity
                name: "Humidity"
                graph: line
          - type: grid
            title: "Filament Box"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.filament_box_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.filament_box_humidity
                name: "Humidity"
                graph: line
          - type: grid
            title: "Balcony"
            columns: 2
            cards:
              - type: sensor
                entity: sensor.balcony_temperature
                name: "Temperature"
                graph: line
              - type: sensor
                entity: sensor.balcony_humidity
                name: "Humidity"
                graph: line
  - path: printer
    title: 3D Printer
    icon: mdi:printer-3d
    cards:
      - type: vertical-stack
        title: Droopy Power
        cards:
          - type: entity
            name: Status
            entity: sensor.droopy_power_status
          - type: grid
            columns: 2
            cards:
              - type: button
                name: "On/Off"
                icon: mdi:power-cycle
                tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.power_cycle_droopy
              - type: button
                name: "Emergency Off"
                icon: mdi:flash-alert-outline
                tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.emergency_power_off_droopy
      - type: sensor
        entity: sensor.octopi_cpu_temperature
        name: "CPU Temperature"
        graph: line
      - type: entities
        title: "Droopy Status"
        entities:
           - sensor.octoprint_current_state
           - sensor.octoprint_actual_tool0_temp
           - sensor.octoprint_actual_bed_temp
           - sensor.octoprint_target_tool0_temp
           - sensor.octoprint_target_bed_temp
           - sensor.octoprint_job_percentage
           - sensor.droopy_est_total_time
           - sensor.droopy_est_remaining_time
           - sensor.droopy_est_finish_time_local
      - type: picture-entity
        entity: camera.droopy_cam
  - path: analytics
    title: "Analytics"
    icon: mdi:home-analytics
    cards:
      - type: history-graph
        title: "Device Current Power Drain"
        entities:
          - sensor.droopy_power
          - sensor.humidifier_power
        hours_to_show: 24
        refresh_interval: 60
      - type: history-graph
        title: "Device Power Consumption"
        entities:
          - sensor.droopy_consumption
          - sensor.humidifier_consumption
        hours_to_show: 24
        refresh_interval: 60
      - type: history-graph
        title: "Lux Graph"
        entities:
          - sensor.office_light_sensor
          - sensor.living_room_light_sensor
        hours_to_show: 24
        refresh_interval: 60
  - path: monitoring
    title: "Monitoring"
    icon: mdi:monitor-eye
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              {% if is_state('binary_sensor.updater', 'on') %}
                Version {{ state_attr('binary_sensor.updater', 'newest_version') }} is available. Release Notes: {{ state_attr('binary_sensor.updater', 'release_notes') }}
              {% else %}
                ## Edi is up-to-date <ha-icon icon="mdi:robot-happy-outline"></ha-icon>
              {% endif %}
          - type: grid
            columns: 2
            square: false
            cards:
              - type: gauge
                entity: sensor.processor_use_percent
              - type: gauge
                entity: sensor.memory_use_percent
          - type: sensor
            entity: sensor.processor_temperature
            name: "CPU Temperature"
            graph: line
          - type: grid
            title: "Pi Hole"
            columns: 3
            cards:
              - type: button
                name: Disable pi-hole (1 minute)
                icon: mdi:pi-hole
                tap_action:
                  action: call-service
                  service: pi_hole.disable
                  service_data:
                    duration: '00:01'
                    entity_id: all
      - type: entities
        title: "Switch Batteries"
        entities:
          - sensor.living_room_opple_switch_battery_level
          - sensor.cuby_battery_level
          - sensor.kitchen_opple_switch_battery_level
          - sensor.kitchen_ikea_switch_battery_level
          - sensor.balcony_opple_switch_battery_level
          - sensor.hall_opple_switch_battery_level
          - sensor.toilet_opple_switch_battery_level
          - sensor.bathroom_opple_switch_battery_level
          - sensor.office_opple_switch_battery_level
          - sensor.office_ikea_switch_battery_level
          - sensor.office_droopy_lamp_switch_battery_level
          - sensor.office_work_desk_lamp_switch_battery_level
          - sensor.bedroom_opple_switch_battery_level
          - sensor.bedroom_ikea_switch_battery_level
      - type: entities
        title: "Climate Sensor Batteries"
        entities:
          - sensor.living_room_climate_sensor_battery_level
          - sensor.balcony_climate_sensor_battery_level
          - sensor.office_climate_sensor_battery_level
          - sensor.filament_box_climate_sensor_battery_level
          - sensor.bedroom_climate_sensor_battery_level
      - type: entities
        title: "Motion Sensor Batteries"
        entities:
          - sensor.living_room_motion_light_sensor_battery_level
          - sensor.office_motion_light_sensor_battery_level
      - type: grid
        title: "Battery Chargers"
        columns: 3
        cards:
          - type: button
            name: "Hota D6 Pro 1"
            entity: switch.hota_d6_pro_1
            icon: mdi:battery-heart-outline
          - type: button
            name: "Hota D6 Pro 2"
            entity: switch.hota_d6_pro_2
            icon: mdi:battery-heart-outline
          - type: button
            name: "Hota D6 Pro 3"
            entity: switch.hota_d6_pro_3
            icon: mdi:battery-heart-outline
